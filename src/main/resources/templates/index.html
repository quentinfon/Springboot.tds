{{> ./main/header}}

<template xmlns:v-slot="http://www.w3.org/1999/XSL/Transform">


    <template v-if="connecter">
        <h3>Bienvenue <% user %></h3>
        <v-data-table
                :headers="headers"
                :items="listeScripts"
                class="elevation-1"
                :footer-props="{'items-per-page-text':'Scripts par page'}"
        >


            <template v-slot:item="props">
                <tr>
                    <td class="text-xs-right"><% props.item.title %></td>
                    <td class="text-xs-right"><% props.item.description %></td>
                    <td class="text-xs-right"><% props.item.strCreationDate %></td>
                    <td class="text-xs-right">
                        <v-btn class="ma-2" tile outlined :href="/script/+props.item.id">
                            <v-icon small>edit</v-icon>
                        </v-btn>

                        <v-dialog v-model="dialog" persistent max-width="290">
                            <template v-slot:activator="{ on }">
                                <v-btn class="ma-2" tile outlined color="error" v-on="on">
                                    <v-icon small>delete</v-icon>
                                </v-btn>
                            </template>
                            <v-card>
                                <v-card-title class="headline">Suppression</v-card-title>
                                <v-card-text>Etes vous sûr de couloir supprimer ce script ?</v-card-text>
                                <v-card-actions>
                                    <v-spacer></v-spacer>
                                    <v-btn color="green darken-1" text @click="dialog = false">Annuler</v-btn>
                                    <v-btn color="red darken-1" text :href="/script/delete/+props.item.id" >Supprimer</v-btn>
                                </v-card-actions>
                            </v-card>
                        </v-dialog>


                    </td>
                </tr>
            </template>
            <template v-slot:no-data>
                <br>
                <v-alert text color="info" border="left">
                    Aucun scripts à afficher.
                </v-alert>
            </template>
            <template v-slot:pageText="props">
                Lignes <% props.pageStart %> - <% props.pageStop %> de <% props.itemsLength %>
            </template>
        </v-data-table>
        <v-btn class="ma-2" tile outlined color="success" href="/script/new" >
            <v-icon left>add_circle_outline</v-icon> Ajouter un Script
        </v-btn>
    </template>


</template>


{{> ./main/footer}}

{{{vue}}}


